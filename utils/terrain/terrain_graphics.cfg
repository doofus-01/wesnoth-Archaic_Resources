#textdomain wesnoth-Archaic_Resources

#############################
# this is needed to keep the base hex from core from climbing out the sides
{NEW:OVERLAY                     Xo*                walls/stone/wall-stone-base LAYER=0 BASE=144,144}
#############################

{NEW:OVERLAY             *^Bryu                                misc/brazier-embellishment}
{NEW:OVERLAY             *^Bryl                                misc/brazier-A ANIM=[01~08] TIME=140}
# {OVERLAY_B *^Bryl ANIMATION_08 misc/brazier-lit}
# {OVERLAY_P *^Bryu 100  misc/brazier}

{NEW:WALL             Xzuc   (Qx*,Ql*)                                 cave/wall-mine-chasm}
{NEW:WALL             Xzuc   (Qx*,Ql*)                                 cave/wall-mine}
{NEW:WALL             Xzuc   (!,Xu*,Xzuc)                                   cave/wall-mine}
# {NEW:WALL             (Xu*)            (!,Xu*,Xz)                                   cave/wall-rough}

# should fit in with the mainline wooden bridge ... but doesn't.  It is still useful in straight regions.
#{TRACK_COMPLETE      *^Bw\y *^Bw|y *^Bw/y  track_wood bridge/wood-broken}
{NEW:TRACK_COMPLETE      *^Bw\y *^Bw|y *^Bw/y  bridge/wood-broken FLAG=track_wood}

##############################
####### ice-blades ###########
##############################
# set flags first
[terrain_graphics]
    map="
, *
3 , *
, 1
2 , *
, 3"

    [tile]
        pos=1
        type=*^Aybl
        set_flag=iceblade_fell
    [/tile]
    [tile]
        pos=2
        type=!,*^Aybl,M*
        set_no_flag=no_iceblade_sw
    [/tile]
    [tile]
        pos=3
        type=!,*^Aybl
        #            set_no_flag=no_iceblade_sw
    [/tile]
    probability=100
[/terrain_graphics]
[terrain_graphics]
    map="
, *
* , 3
, 1
* , 2
, 3"

    [tile]
        pos=1
        type=*^Aybl
        set_flag=iceblade_fell
    [/tile]
    [tile]
        pos=2
        set_flag=no_iceblade_se
        type=!,*^Aybl,M*
    [/tile]
    [tile]
        pos=3
        type=!,*^Aybl
        #            set_no_flag=no_iceblade_sw
    [/tile]
    probability=100
[/terrain_graphics]
[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, 2"

    [tile]
        pos=1
        type=*^Aybl
        set_flag=iceblade_fell
    [/tile]
    [tile]
        pos=2
        type=!,*^Aybl,M*
        set_no_flag=no_iceblade_s
    [/tile]
    probability=100
[/terrain_graphics]
[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, *"

    [tile]
        pos=1
        type=*^Aybl
        set_no_flag=iceblade
    [/tile]
    probability=100
[/terrain_graphics]

# now we draw images

[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, *"

    [tile]
        pos=1
        type=*^Aybl
        has_flag=iceblade_fell
        set_flag=iceblade_drawn
    [/tile]

    probability=25
    [image]
        name="ice-blades/ice-blades@V.png"
        variations="6;7"
        #            layer=5
        base=90,144
        center=90,144
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
, * , *
* , * , *
, * , *
* , 1 , *
, 1 , 1
* , 1 , *
, * , *
* , * , *
, * , *"

    [tile]
        pos=1
        type=*^Aybl
        has_flag=iceblade
        set_no_flag=iceblade_drawn
    [/tile]

    probability=20
    [image]
        name="ice-blades/ice-blades_2x2_@V.png"
        variations="1;2;3"
        #            layer=5
        base=90,244
        center=164,216
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, *"

    [tile]
        pos=1
        type=*^Aybl
        has_flag=iceblade
        set_no_flag=iceblade_drawn
    [/tile]

    probability=100
    [image]
        name="ice-blades/ice-blades@V.png"
        variations="1;2;3;4;5"
        #            layer=5
        base=90,144
        center=90,144
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
, *
* , *
, *
* , *
, 1"

    [tile]
        pos=1
        type=!,*^Aybl
        has_flag=no_iceblade_s
    [/tile]

    probability=100
    [image]
        name="ice-blades/ice-blades-n@V.png"
        variations=";2"
        layer=5
        base=90,144
        center=90,144
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
, *
* , *
, *
1 , *
, *"

    [tile]
        pos=1
        type=!,*^Aybl
        has_flag=no_iceblade_sw
    [/tile]

    probability=100
    [image]
        name="ice-blades/ice-blades-n-ne@V.png"
        variations=";2"
        #            layer=5
        base=90,144
        center=90,144
        #            center=135,74
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
, *
* , *
, *
* , 1
, *"

    [tile]
        pos=1
        type=!,*^Aybl
        has_flag=no_iceblade_se
    [/tile]

    probability=100
    [image]
        name="ice-blades/ice-blades-n-nw@V.png"
        variations=";2"
        #            layer=5
        base=90,144
        #            center=15,78
        center=90,144
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, *"

    [tile]
        pos=1
        type=*^Bryb
        set_no_flag=overlay
    [/tile]

    probability=100
    [image]
        name="misc/brazier.png~BLIT(terrain/misc/brazier-lit-A0[1~8].png~CS(-130,20,170)~CROP(0,0,72,27),0,0):150"
        #            variations=";2;3;4;5;6;7;8;9;10;11"
        layer=5
        base=90,144
        center=90,144
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, 1, 1, *  
* ,* , 1, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^Ruty
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins3-tower@V.png
        variations="1;2;3"
        base=90,390
        center=252,252
        layer=0
    [/image]
    [image]
        name=ruins1-tower-shadow2.png
        base=90,190
        center=252,252
        layer=-25
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, 1, *, *  
* ,* , 1, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^Ruty
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins2-tower@V.png
        variations="1"
        base=90,320
        center=252,252
        layer=0
    [/image]
    [image]
        name=ruins1-tower-shadow2.png
        base=90,190
        center=252,252
        layer=-25
    [/image]
    probability=70
[/terrain_graphics]

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *
* ,* , *, *, *
, *, *, *, *
*, * , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, 1, *, *  
* ,* , 1, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^Ruty
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins2-tower@V.png
        variations="2;3"
        base=90,320
        center=252,310
#        center=252,322
        layer=0
    [/image]
    [image]
        name=ruins1-tower-shadow2.png
        base=90,190
        center=252,322
        layer=-25
    [/image]
    probability=100
[/terrain_graphics]

# sand-tower ruins taken from TotSS

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , 1, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^Ruty
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins1-tower@V.png
        variations="1;5"
        base=90,290
        center=252,202
        layer=0
    [/image]
    [image]
        name=ruins1-tower-shadow1.png
        base=90,290
        center=252,202
        layer=-25
    [/image]
    probability=38
[/terrain_graphics]

[terrain_graphics]
    map="
, *, *, *, *
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , *, *, *
, *, *, *, *  
* ,* , 1, *, *
, *, *, *, *  
*, * , *, *, *
, *, *, *, *" 

    [tile]
        pos=1
        type=*^Ruty
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=ruins1-tower@V.png
        variations="2;3;3b;4"
        base=90,360
        center=252,252
        layer=0
    [/image]
    [image]
        name=ruins1-tower-shadow2.png
        base=90,360
        center=252,252
        layer=-25
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
, *, *, 
*, *, *" 

    [tile]
        pos=1
        type=*^Rusy
        set_no_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-rubble-small.png
        variations="2;3;4"
        #        base=90,190
        center=144,108
        layer=-26
    [/image]
    probability=90
[/terrain_graphics]

# less common
[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
,*, *, 
*, *, * "

    [tile]
        pos=1
        type=*^Rusy
        set_no_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-rubble-small.png
        variations="1;5;7"
        #        base=90,190
        center=144,108
        layer=-26
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
, 2, 2, 
*, 2, *" 

    [tile]
        pos=1
        type=*^Rusy
        set_no_flag=ruins_overlay
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=2
        type=*^Rusy
        has_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-tower-small.png
        variations="3;4;7;8"
        #        base=90,190
        center=144,108
        layer=-25
    [/image]
    probability=95
[/terrain_graphics]

# less common
[terrain_graphics]
    map="
*, *, * 
, *, *,  
*, 1, * 
, 2, 2, 
*, 2, *" 

    [tile]
        pos=1
        type=*^Rusy
        set_no_flag=ruins_overlay
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=2
        type=*^Rusy
        has_flag=ruins_base
    [/tile]

    [image]
        name=ruins@V-tower-small.png
        variations="10;11"
        #        base=90,190
        center=144,108
        layer=-1
    [/image]
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
*, *, * 
, *, *,  
3, 1, 3 
, 2, 2, 
*, 2, * "

    [tile]
        pos=1
        type=*^Rusy
        set_no_flag=ruins_overlay
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=2
        type=*^Rusy
        has_flag=ruins_base
    [/tile]
    [tile]
        pos=3
        no_flag=ruins_overlay
    [/tile]

    [image]
        name=ruins@V-tower-small.png
        variations="1;2;5;6;9"
        #        base=90,190
        center=144,108
        layer=-25
    [/image]
    probability=100
[/terrain_graphics]

# Macro taken from Cataclysm to disable wall transitions for castles
#define ARCHAIC_ERA:DISABLE_WALL_TRANSITIONS_F TERRAIN FLAG
    [terrain_graphics]
        [tile]
            x=0
            y=0
            type={TERRAIN}
            set_flag={FLAG}-tl,{FLAG}-tr,{FLAG}-bl,{FLAG}-br,{FLAG}-r,{FLAG}-l
        [/tile]
    [/terrain_graphics]
#enddef

# this is a place holder terrain, for the bigger overlays
# {TERRAIN_BASE_LF  Zdyd					-999		lowest		chasm/depths}
{NEW:BASE    Zdyd              chasm/depths    LAYER=-999   FLAG=lowest}
{NEW:DISABLE_TRANSITION Zdyd Ms} # might need to add to Ms

# Eventually, hope to get tundra and snow drifts done, but only tundra for now
# Drift may never get done - or maybe it will

# {DISABLE_TRANSITIONS Dyb}

# TERRAIN_BASE_PROB_FL TERRAIN_PATTERN IMAGESTEM PROB FLAG LAYER
#[terrain_graphics]
#    [tile]
#	x,y=0,0
#	type=Tyb
#	probability=100
#	no_flag=base
#	set_flag=base
#	[image]
#	    layer= -1000
#	    name= tundra1
#            base= # does not seem necessary
#	[/image]
#    [/tile]
#[/terrain_graphics]

# is this used anywhere?
#ifdef __UNUSED__
# The southern rope needs to be one a higher level than the unit, or this will look weird...
# (yes, a lot of copy-paste)
#define ARC_TRACK_COMPLETE_L SE_NW_VALUE N_S_VALUE NE_SW_VALUE LAYER FLAG IMAGESTEM
    {TRACK_RESTRICTED6_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED5_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED4_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED3_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED2_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * *   100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_RESTRICTED_PLFB  ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * * * 100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}
    {TRACK_SINGLE_PLFB ({SE_NW_VALUE},{N_S_VALUE},{NE_SW_VALUE}) * * * 100 {LAYER} {FLAG} IMAGE_SINGLE {IMAGESTEM}}

    #emergency catch all (mainly for missing images)
    {TRACK_EMERGENCY_PLFB {SE_NW_VALUE} 100 {LAYER} {FLAG} IMAGE_SINGLE se nw {IMAGESTEM}}
    {TRACK_EMERGENCY_PLFB {N_S_VALUE}   100 {LAYER} {FLAG} IMAGE_SINGLE n  s  {IMAGESTEM}}
    {TRACK_EMERGENCY_PLFB {NE_SW_VALUE} 100 {LAYER} {FLAG} IMAGE_SINGLE ne sw {IMAGESTEM}}
#enddef

# this is abandoned
# ifdef __UNUSED__
#rope bridge
# basic images for the bridge
# {TRACK_COMPLETE      *^By\ *^By| *^By/  overlay bridge-rope/wood}
# {ARC_TRACK_COMPLETE_L      *^By\ *^By| *^By/  25 overlayhigh bridge-rope/rope}
# add transition bridges<->bridges wherever images are missing
# {TRACK_BORDER_RESTRICTED_PLF (*By|,*^By/,*^By\) (*^By|,*^By/,*^By/) 100 -80 overlay bridge-rope/wood-end}
# add ramps where straight bridges end on land
# {TRACK_BORDER_RESTRICTED_PLF (*^By|,*^By/,*^By\) (!,C*,K*,*^F*) 100 -80 overlay bridge-rope/wood-end}

# define ARCH_ROPE_BRIDGE_NW1_LF TERRAINLIST ADJACENTNW1 ADJACENTNW2 ADJACENTSE1 ADJACENTSE2 LAYER FLAG IMAGE
[terrain_graphics]
    map="
,  .,  .,  .
3,   .,  .,  .
,  2,  .,  .
*,   1,  .,  .
,  *,  4,  .
.,   *,  5,  ."
    [tile]
        pos=1
        type={TERRAINLIST}
        no_flag={FLAG}
        set_flag={FLAG}
    [/tile]
    [tile]
        pos=2
        type={ADJACENTNW1}
        no_flag={FLAG}-nw1
    [/tile]
    [tile]
        pos=3
        type={ADJACENTNW2}
        no_flag={FLAG}-nw2
    [/tile]
    [tile]
        pos=4
        type={ADJACENTSE1}
        #            set_flag={FLAG}
        no_flag={FLAG}-se1
    [/tile]
    [tile]
        pos=5
        type={ADJACENTSE2}
        #            set_flag={FLAG}
        no_flag={FLAG}-se2
    [/tile]
    [image]
        layer={LAYER}
        name={IMAGE}.png
        center=144,180
    [/image]
    [image]
        layer=25
        name={IMAGE}-rope.png
        center=144,180
    [/image]
[/terrain_graphics]
# enddef

{ARCH_ROPE_BRIDGE_NW1_LF *^By\ (!,*^By\) (*) (!,*^By\) (*) -80 overlay bridge-rope/wood-se-nw}
{ARCH_ROPE_BRIDGE_NW1_LF *^By\ *^By\ (!,*^By\) (!,*^By\) (*) -80 overlay bridge-rope/hex-b}
{ARCH_ROPE_BRIDGE_NW1_LF *^By\ (!,*^By\) (*) *^By\ (!,*^By\) -80 overlay bridge-rope/wood-sag-nw}
{ARCH_ROPE_BRIDGE_NW1_LF *^By\ *^By\ *^By\ (!,*^By\) (*) -80 overlay bridge-rope/hex-c}
{ARCH_ROPE_BRIDGE_NW1_LF *^By\ (!,*^By\) (*) *^By\ *^By\ -80 overlay bridge-rope/wood-sag-nw}
{ARCH_ROPE_BRIDGE_NW1_LF *^By\ *^By\ (*) *^By\ (*) -80 overlay bridge-rope/wood-se-nw}

#endif

###################################################################################################
########################################## dead trees ############################################
#################################################################################################

# these are now in mainline, but keeping for compatibility for now
# {OVERLAY_RANDOM *^Fyok scenery-terrain/oak-tree-dead}
# {OVERLAY_RANDOM *^Fyak scenery-terrain/great-tree-snow}
{NEW:OVERLAY             W*^Fyok                                            forest/great-oak-tree-dead-water}
{NEW:OVERLAY             *^Fyok                                             forest/great-oak-tree-dead}
{NEW:OVERLAY             *^Fyak                                             forest/great-tree-snowy}

{NEW:FOREST             *^Fdy             (C*,K*,X*,Ql*,Qx*,Gv*,W*,A*,M*,*^V*,*^B*)    forest/dead}
# {OVERLAY_LF		*^Fdy				-1	ash		forest/ash}
{NEW:OVERLAY            *^Fdy             forest/ash    FLAG=ash  LAYER=-1}
# {TRANSITION_COMPLETE_L     *^Fdy               (!,*^Fdy)                       -1                  forest/ash}
{NEW:TRANSITION_INTRA   *^Fdy              -1    forest/ash  ADJACENT="!,*^Fdy"}

#{OVERLAY_P *^Zulf 100  unlit-fire}
{NEW:OVERLAY            *^Zulf             unlit-fire}

# {TERRAIN_BASE_P        Tyb                                    6                        tundra3}
# {TERRAIN_BASE_P        Tyb                                    15                       tundra2}
# {TERRAIN_BASE_P        Tyb                                    30                       tundra5}
# {TERRAIN_BASE_P        Tyb                                    50                       tundra4}
# {TERRAIN_BASE_P        Tyb                                    100                      tundra1}
{NEW:BASE                Tyb                                    tundra}

# {TERRAIN_BASE          Ayb                                                             thin-ice}
{NEW:BASE              Ayb                                                            thin-ice}
{NEW:BASE              Fyp                                  	                      steel/floor LAYER=-75}
# #{TERRAIN_BASE_L          Fypd                                  -75                      steel1/plate}
# {TERRAIN_BASE_PL          Fypd           50                      -75                      steel/dark-plate2}
# {TERRAIN_BASE_PL          Fypd           100                      -75                      steel/dark-plate1}
{NEW:BASE              Fypd                                  	                      steel/dark-plate LAYER=-75}
#{OVERLAY_RANDOM_L	*^Fyod	-1	steel/dark-plate-hills}
# hills for dark-steel terrain

[terrain_graphics]
    map="
,*
3,*
,1,
*,2
,*"

    [tile]
        pos=1
        type=*^Xyb\,*^Fyb\
        set_no_flag=plate_bridge
    [/tile]
    [tile]
        pos=2
        type=*^Xyb\,*^Fyb\
    [/tile]
    [tile]
        pos=3
        type=*^Xyb\,*^Fyb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-se-nw@V.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,3
,1,
2,*
,*"

    [tile]
        pos=1
        type=*^Xyb/,*^Fyb/
        set_no_flag=plate_bridge
    [/tile]
    [tile]
        pos=2
        type=*^Xyb/,*^Fyb/
    [/tile]
    [tile]
        pos=3
        type=*^Xyb/,*^Fyb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-sw-ne.png"
        #        name="steel/dark-plate-bridge-se-nw@V.png"
        #	variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,2
,*"

    [tile]
        pos=1
        type=*^Fyb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Fyb\
        type=!,*^Fyb\,*^Xyb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-se-end.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
2,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Fyb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Fyb\
        type=!,*^Fyb\,*^Xyb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-nw-end.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,2
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Fyb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Fyb/
        type=!,*^Fyb/,*^Xyb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-ne-end.png"
        #	variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
2,*
,*"

    [tile]
        pos=1
        type=*^Fyb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Fyb/
        type=!,*^Fyb/,*^Xyb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-sw-end.png"
        #	variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
2,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Xyb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end_up
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Xyb\
        type=!,*^Xyb\,*^Fyb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-nw-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,2
,*"

    [tile]
        pos=1
        type=*^Xyb\
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end_up
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Xyb\
        type=!,*^Xyb\,*^Fyb\
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-se-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,2
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Xyb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_n_end_up
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Xyb/
        type=!,*^Xyb/,*^Fyb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-ne-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
2,*
,*"

    [tile]
        pos=1
        type=*^Xyb/
        no_flag=plate_bridge
        set_no_flag=plate_bridge_s_end_up
    [/tile]
    [tile]
        pos=2
        #        type=!,*^Xyb/
        type=!,*^Xyb/,*^Fyb/
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-bridge-sw-end-up.png"
        variations=";2"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

# restrict what image can show up in crowded layouts
# isolated
[terrain_graphics]
    map="
,2
2,2
,1,
2,2
,2"

    [tile]
        pos=1
        type=*^Fyod
        set_no_flag=plate_clutter
    [/tile]
    [tile]
        pos=2
        type=!,*^Fyod
    [/tile]

    probability=60

    [image]
        name="steel/dark-plate-hills@V.png"
        variations="1;3;6"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

# crowded
[terrain_graphics]
    map="
,*
*,*
,1,
*,2
,*"

    [tile]
        pos=1
        type=*^Fyod
        set_no_flag=plate_clutter
    [/tile]
    [tile]
        pos=2
        type=*^Fyod
    [/tile]

    probability=95
    rotations=7,7,7,skip,skip,skip

    [image]
        name="steel/dark-plate-hills@V.png"
        variations="7;8"
        base=120,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

# default
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Fyod
        set_no_flag=plate_clutter
    [/tile]

    probability=90
    [image]
        name="steel/dark-plate-hills@V.png"
        variations="4;5"
        base=90,170
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Fyod
        set_no_flag=plate_clutter
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-hills2.png"
        base=90,164
        center=90,144
        layer=-1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Fypp
        set_no_flag=plate_heals
    [/tile]

    probability=50
    [image]
        name="steel/dark-plate-panel.png"
        base=90,164
        center=90,144
        layer=-10
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Fypp
        set_no_flag=plate_heals
    [/tile]

    probability=100
    [image]
        name="steel/dark-plate-panel-glow[1,2,3,4,5,4,3,2].png:[300,100*3,800,100*3]"
        base=90,164
        center=90,144
        layer=-10
    [/image]
[/terrain_graphics]

# the less common overlays
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=Fypd
        set_no_flag=plate_overlay
    [/tile]

    probability=15
    [image]
        name="steel/dark-plate-overlay@V.png"
        variations="7;8;11;13;15"
        base=90,164
        center=90,144
        layer=-55
    [/image]
[/terrain_graphics]

# the more common overlays
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=Fypd
        set_no_flag=plate_overlay
    [/tile]

    probability=90
    [image]
        name="steel/dark-plate-overlay@V.png"
        variations="1;2;3;4;5;6;9;10;12;14;16;17;18"
        base=90,164
        center=90,144
        layer=-55
    [/image]
[/terrain_graphics]

# {TERRAIN_BASE_L          Myb                                  -70                      brick/light}
{NEW:BASE                Myb                                  	                        brick/light LAYER=-70}
# {TERRAIN_BASE_L          Pryf                                  -79                      brick/primeval}
{NEW:BASE                Pryf                                  	                        brick/primeval LAYER=-79}
# {OVERLAY_LF		 *^Pyg					-60	top		brick/primeval-grid}
{NEW:OVERLAY            *^Pyg                                   brick/primeval-grid    FLAG=top  LAYER=-60}
# {OVERLAY_LF		 (!,Q*^Pyg,!,*^Pyg)			-61	bottom		brick/primeval-grid-shadow}
{NEW:OVERLAY             (!,Q*^Pyg,!,*^Pyg)                     brick/primeval-grid-shadow    FLAG=bottom  LAYER=-61}
# {OVERLAY_LF		 Q*^Pyg					-61	bottom		brick/primeval-grid-safe}
{NEW:OVERLAY            Q*^Pyg                                  brick/primeval-grid-safe    FLAG=bottom  LAYER=-61}
# {TERRAIN_BASE_L          Mybd                                 -70                      brick/dark}
{NEW:BASE                Mybd                                  	                        brick/dark LAYER=-70}

#######################################################################################
############################## gates ##################################################
#######################################################################################
# there is now a mainline version, I don't think we need these anymore
#ifdef __UNUSED__
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gye
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-rusty-se.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gyeo
        set_no_flag=gate
    [/tile]

    probability=100
    #    [image]
    #        name="gate-rusty-se.png"
    #        base=90,164
    #        center=90,144
    #        layer=1
    #    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,1,*,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=Rrc^Gye*,Brym^Gye*
        has_flag=gate
        set_flag=marble
    [/tile]

    probability=100
    [image]
        name="gate-marble-rim-se.png"
        base=90,164
        center=126,132
        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,1,*,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=*^Gye*
        no_flag=marble
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-stone-rim-se.png"
        base=90,164
        center=126,132
        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gyw
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-rusty-sw.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gywo
        set_no_flag=gate
    [/tile]

    probability=100
    #    [image]
    #        name="gate-rusty-sw.png"
    #        base=90,164
    #        center=90,144
    #        layer=1
    #    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,*,1,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=Rrc^Gyw*,Brym^Gyw*
        has_flag=gate
        set_flag=marble
    [/tile]

    probability=100
    [image]
        name="gate-marble-rim-sw.png"
        base=90,164
        center=162,132
        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,*,1,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=*^Gyw*
        no_flag=marble
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="gate-stone-rim-sw.png"
        base=90,164
        center=162,132
        layer=1
    [/image]
[/terrain_graphics]
#endif

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gsye
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-steel-se.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gsyw
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-steel-sw.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gtye
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-se.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,  
*,1,*,*  
,1,*,*,  
*,*,*,*  
,*,*,*"  

    [tile]
        pos=1
        type=*^Gtye
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-rim-se.png"
        base=90,164
        center=126,132
        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Gtyw
        set_no_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-sw.png"
        base=90,164
        center=90,144
        #        layer=1
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,*,
*,1,*,*
,*,1,*,
*,*,*,*
,*,*,*"

    [tile]
        pos=1
        type=*^Gtyw
        has_flag=gate
    [/tile]

    probability=100
    [image]
        name="dark_planet/gate-stone-rim-sw.png"
        base=90,164
        center=162,132
        layer=1
    [/image]
[/terrain_graphics]

# fountain
[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Fynt
        set_no_flag=fountain
    [/tile]

    probability=100
    [image]
        name="
fountain-0.png:150,fountain-1.png:150,fountain-0a.png:150,fountain-1a.png:100,fountain-0a.png:150,fountain-0.png:150,fountain-0a.png:150,fountain-1.png:100,fountain-0.png:100,fountain-0a.png:100,fountain-1.png:150,fountain-0.png:150,fountain-2.png:150
"
        base=90,144
        center=90,144
        layer=-15
    [/image]
[/terrain_graphics]

# marble lamp-post

[terrain_graphics]
    map="
,*
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Lymp
        set_no_flag=lamp
    [/tile]

    probability=100
    [image]
        name="brick1/streetlamp.png"
        base=90,144
        center=90,116
        layer=-1
        [variant]
            tod=first_watch,second_watch,dusk
            name="brick1/streetlamp-1.png:50,brick1/streetlamp-2.png:100,brick1/streetlamp-3.png:100,brick1/streetlamp-4.png:100,brick1/streetlamp-5.png:100,brick1/streetlamp-6.png:100,brick1/streetlamp-7.png:150,brick1/streetlamp-8.png:100,brick1/streetlamp-9.png:100,brick1/streetlamp-10.png:100,brick1/streetlamp-11.png:100,brick1/streetlamp-12.png:50"
        [/variant]
    [/image]
[/terrain_graphics]

# villages- also see bellow, around line 1923

{NEW:VILLAGE             *^Vymb                                                      villages/marble}

# does the terrain need to be changed from Xomy to something without the 'o' in the second position?

# I don't think I need this...
# {KEEP_BASE               Xomy                                                        marble_walls/wall-stone-base}

# expanding this so that I can use variations on n-ne, nw-n, and n
# {WALL_ADJACENT_TRANSITION Xomy (!,,Xo*,Xu*) IMAGE_SINGLE marble_walls/wall-stone}
# this is obsolete
#ifdef __UNUSED__
{WALL_ADJACENT_6 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone}
{WALL_ADJACENT_5 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone}
{WALL_ADJACENT_4 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone}
{WALL_ADJACENT_3 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone}

{WALL_2_VARIATION 30 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone2}
{WALL_ADJACENT_2 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone}

{WALL_1_VARIATION 50 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone2}
{WALL_ADJACENT_1 Xyom (!,,Xo*,Xu*,Xyom) IMAGE_SINGLE marble_walls/wall-stone}
#endif

# using new wall style -
{NEW:WALL2_CORNER     (Xoy*)      Xu*           (!,Xu*,Xo*)      walls/stone/wall-mixed}
{NEW:WALL2_CORNER     (Xoym)      Xo*           (!,Xu*,Xo*)      marble_walls/wall-stone}
{NEW:WALL2            (Xoy*)      Xu*           (!,Xu*,Xo*)      walls/stone/wall-mixed}
{NEW:WALL_CORNER                 Xoym               (!,Xo*,Xu*)      marble_walls/wall-stone}
{NEW:WALL                        Xoym           (!,Xu*,Xo*)      marble_walls/wall-stone}
# to catch all leftovers with default images
# {NEW:WALL                        Xyom           (!,Xu*,Xo*)      walls/stone/wall-stone}

#################################################################################################################################
################################################### gloomy terrain ##############################################################

# {OVERLAY_RANDOM_L        Wrby                               -320          water2/reef}
{NEW:OVERLAY               Wrby                               water2/reef   LAYER=-320}

# obsolete
# {ANIMATED_WATER_15        (Woby)         "~CS(-25,-40,-90)"       150    water/ocean}  # Black Ocean color
# {ANIMATED_WATER_15        (Wwby,Wrby)    "~CS(-35,-45,-115)"       110    water/coast-tropical}  # Black Water color

# {NEW:WATER_342_180         Woby                   water/ocean 21}
[terrain_graphics]
    [tile]
        x,y=0,0
        type=Woby
        set_no_flag=base

        {WATER_342_180_TILE_VARIANTS "" -549 "~CS(-25,-40,-90)" water/ocean 21}
    [/tile]
[/terrain_graphics]

# {NEW:WATER_342_180         Wwby,Wrby water/water 17}
# changed the layer from -1000 to -549 to keep it above the blue transitions of mainline
[terrain_graphics]
    [tile]
        x,y=0,0
        type=Wwby,Wrby
        set_no_flag=base

        {WATER_342_180_TILE_VARIANTS "" -549 "~CS(-85,-60,-80)" water/water 17}
    [/tile]
[/terrain_graphics]
{NEW:WATER_342_180_OVERLAY Woby,Wwby,Wrby                 water2/overlay-black     -502}

{NEW:WATER_342_180_TRANSITION             Woby           (!,Woby,!,W*,Sm)          -547 "~O(50%)~CS(-25,-40,-90)" water/ocean 21}
{NEW:WATER_342_180_TRANSITION             Wwby,Wrby           (!,Wwby,Wrby,!,W*,Sm)          -548 "~O(50%)~CS(-85,-60,-80)" water/water 17}

{NEW:WATER_342_180_OVERLAY_TRANSITION     Woby,Wwby,Wrby  (!,Woby,Wwby,Wrby,!,W*,Sm) -503 water2/overlay-black     0.20}

# obsolete
# {ANIMATED_WATER_15_TRANSITION Woby                (!,Woby,!,W*,S*)            -552 "~CS(-25,-40,-90)"     150 water/ocean-blend}  # black ocean color
# {ANIMATED_WATER_15_TRANSITION Wwby,Wrby           (!,Wwby,Wrby,!,W*,S*)       -554 "~CS(-35,-45,-115)"     110 water/coast-tropical-long}  # black water color
# {ANIMATED_WATER_15_TRANSITION Woby           (Xv,_off^_usr)                  -562 "~CS(-25,-40,-90)"    150 water/ocean-long}  # black ocean color
# {ANIMATED_WATER_15_TRANSITION Wwby,Wrby      (Xv,_off^_usr)                  -554 "~CS(-35,-45,-115)"    110 water/coast-tropical}  # black water color

#define NEW:BEACH_BMR TERRAINLIST ADJACENT IMAGESTEM IPF
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={ADJACENT}
            set_no_flag=beach-@R0-[@R5,@R1]
        [/tile]
        [tile]
            pos=2
            type={TERRAINLIST}
            set_no_flag=beach-@R2-@R3
        [/tile]
        [tile]
            pos=3
            type={TERRAINLIST}
            set_no_flag=beach-@R4-@R3
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-concave-@R0-@R5.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-concave-@R0-@R1.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={TERRAINLIST}
            set_no_flag=beach-@R0-[@R5,@R1]
        [/tile]
        [tile]
            pos=2
            type={ADJACENT}
            set_no_flag=beach-@R2-@R3
        [/tile]
        [tile]
            pos=3
            type={ADJACENT}
            set_no_flag=beach-@R4-@R3
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R5.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R1.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={TERRAINLIST}
            set_no_flag=beach-@R0-@R5
        [/tile]
        [tile]
            pos=2
            type={ADJACENT}
            set_no_flag=beach-@R2-@R3
        [/tile]
        [tile]
            pos=3
            type=!,{TERRAINLIST},{ADJACENT}
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R5.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
    [terrain_graphics]
        map="
,  2
*,   3
,  1  
*,   *
,  *" 
        [tile]
            pos=1
            type={TERRAINLIST}
            set_no_flag=beach-@R0-@R1
        [/tile]
        [tile]
            pos=2
            type=!,{TERRAINLIST},{ADJACENT}
        [/tile]
        [tile]
            pos=3
            type={ADJACENT}
            set_no_flag=beach-@R4-@R3
        [/tile]

        rotations=tr,r,br,bl,l,tl

        [image]
            # wmlscope: start ignoring
            name={IMAGESTEM}-convex-@R0-@R1.png{IPF}
            # wmlscope: stop ignoring
            layer=-500
            center=90,144
            base=90,144
        [/image]
    [/terrain_graphics]
#enddef

#define BMR_GENERIC_SINGLE_PLFB TERRAIN PROB LAYER FLAG IMAGESTEM IPF
    [terrain_graphics]
        map="
, *
* , *
, 1  
* , *
, *" 

        [tile]
            pos=1
            type={TERRAIN}
            set_no_flag={FLAG}
        [/tile]

        probability={PROB}
        [image]
            name={IMAGESTEM}@V.png{IPF}
            variations=";2;3;4;5;6;7;8;9;10;11"
            layer={LAYER}
            base=90,144
            center=90,144
        [/image]
    [/terrain_graphics]
#enddef

{BMR_GENERIC_SINGLE_PLFB        Ydb     100     -900    base    sand/beach      "~CS(-105,-65,-35)"}
# these are obsolete.  Need to replace with modified NEW:WAVES that has IPFs
# {NEW:BEACH_BMR                 Ydb,Hby                                   Wwby,Woby,Wrby         sand/shore      "~CS(-95,-65,-45)"}
# {NEW:BEACH_BMR                 Urb,Rb,Uu,Uh                                   Wwby,Woby,Wrby         flat/shore "~CS(-95,-65,-45)"}
{BMR_BORDER_COMPLETE_L     Ydb               (!,Ydb,Hby,Urb,W*,S*,Ai)                    -510                 sand/beach        "~CS(-105,-65,-35)"}
{BMR_BORDER_COMPLETE_L     Ydb               R*                                 -319                 sand/beach "~CS(-105,-65,-35)"}

################### SMOKE #################################

{BMR_GENERIC_SINGLE_PLFB  *^Foyg     100     11    overlay    fog/fog      "~CS(-105,-105,-115)"}
{BMR_BORDER_COMPLETE_L     *^Foyg               (!,*^Foyg)                                 9                 fog/fog "~CS(-105,-105,-115)"}
[terrain_graphics]
    map="
,*,*,*
*,*,*,*
,*,1,*
*,*,1,*
,*,*,*"

    [tile]
        pos=1
        type=*^Foyg
        set_no_flag=smoke_overlay
    [/tile]

    probability=25
    [image]
        name="fog/overlay@V.png"
        variations=";2;3"
        base=90,90
        center=90,144
        layer=112
    [/image]
[/terrain_graphics]

##########################################################################################################################################################

# this is the transition to mountains and water
# {TRANSITION_BASE terrain adjacent prob=100 layer=-500 flag=transition imagestem
# this is a meta-macro, whatever that means
# TRANSITION_BASE is deprecated in 1.9, changing to TRANSITION_COMPLETE

{NEW:BASE   Urfz     dark_planet/floor}

# {TRANSITION_COMPLETE       Tyb		 W*                                             tundra-to-water}
{NEW:TRANSITION            Tyb        W*                                     -200    tundra-to-water}
# {TRANSITION_COMPLETE       Tyb        (!,Gg*,Qxu,Mm,Ms,Hh)                                  tundra}
{NEW:TRANSITION            Tyb        (!,Gg*,Qxu,Mm,Ms,Hh,Tyb)                   -200                 tundra}

#{TRANSITION_COMPLETE_L       Fyp        (!,Mm,Ms,H*,Xu*,Xo*,Fyp)            -75                   steel/floor}
{NEW:TRANSITION_INTRA          Fyp                    -74                   steel/floor  ADJACENT="!,Mm,Ms,H*,Xu*,Xo*,Fyp"  FLAG=intra}
##{TRANSITION_COMPLETE_LF       Fyp        (!,Mm,Ms,H*,Xu*,Fyp)            -75      top             steel/plate}
##{TRANSITION_COMPLETE_LF       Fypd        (!,Mm,Ms,H*,Xu*,Fyp*)           -76      top             steel1/plate}
#{TRANSITION_COMPLETE_LF       Fypd        (!,Xo*,Xp*,Mm,Ms,H*,Xu*,Fyp*)           -76      top             steel/dark-plate}
{NEW:TRANSITION                Fypd        (!,Xo*,Xp*,Mm,Ms,H*,Xu*,Fyp*)           -76                 steel/dark-plate   FLAG=top}
#{TRANSITION_COMPLETE_LF       Fypd        (Qx*,W*)           -74      trim             steel/dark-plate-trim}
{NEW:TRANSITION                Fypd        (Qx*,W*)           -74                 steel/dark-plate-trim   FLAG=trim}

##{TRANSITION_COMPLETE_LF       Myb        (!,Mm,Ms,H*,Xu*,Myb)            	-75      regular         brick/light}
#{TRANSITION_COMPLETE_LF       Pryf        (!,M*,H*,Xu*,Pryf)            -79      regular         brick/primeval}
{NEW:TRANSITION                Pryf        (!,M*,H*,Xu*,Pryf)            -79      brick/primeval  FLAG=regular}
#{TRANSITION_COMPLETE_LF       *^Pyg        (!,M*,Xu*,*^Pyg)            -60      regular         brick/primeval}
{NEW:TRANSITION                *^Pyg        (!,M*,Xu*,*^Pyg)            -60      brick/primeval  FLAG=regular2}
#{TRANSITION_COMPLETE_LF       Myb        (!,W*,Qx*,Mm,Ms,H*,Xu*,Myb)            -75      regular         brick/light}
{NEW:TRANSITION                Myb        (!,W*,Qx*,Mm,Ms,H*,Xu*,Myb*)            -75     brick/light    FLAG=regular}
#TODO #{TRANSITION_COMPLETE_LF       Myb        (W*,Qx*)           			-74      top             brick/light-rim}
#{TRANSITION_COMPLETE_LF       Mybd       (W*,Qx*)           			-70      ridge             brick/dark-to-water}
{NEW:TRANSITION_INTRA          Mybd                  	                        -69      brick/dark-to-water  FLAG=ridge  ADJACENT="W*,Qx*"}
#{TRANSITION_COMPLETE_LF       Mybd       (Fyp*,!,W*,Qx*,Mm,Ms,H*,Xu*,Myb*)           -70      regular              brick/dark}
{NEW:TRANSITION                Mybd       (!,W*,Qx*,Mm,Ms,H*,Xu*,Mybd)                -70      brick/dark           FLAG=regular}
##{TRANSITION_COMPLETE_LF       Mybd       (!,Mm,Ms,H*,Xu*,Myb*)           -70      regular         brick/dark}

# The shadow is only on the water
##{TRANSITION_COMPLETE_LF    (Fyp,Fypd)          W*            		-100     bottom      steel/plate-to-water}
#{TRANSITION_COMPLETE_LF    Myb          W*            		-100     bottom      brick/light-to-water}
##{TRANSITION_COMPLETE_LF    Mybd          Qx*            		-100     bottom      brick/dark-to-water}

#{TRANSITION_COMPLETE       Ayb        (!,Gg*,Qxu,Mm,Ms,Hh,Ayb)                                  thin-ice}
{NEW:TRANSITION             Ayb        (!,Gg*,Qxu,Mm,Ms,Hh,Ayb)             -600                 thin-ice}

# path - I don't really understand the macros yet
{LAYOUT_TRACKS_F               *^Lyd\ *^Lyd| *^Lyd/  overlay}
{LAYOUT_TRACKS_F               *^Lyd\ *^Lyd| *^Lyd/  overlay}
#{TRACK_COMPLETE      *^Lyd\ *^Lyd| *^Lyd/  overlay path/path}
{NEW:TRACK_COMPLETE      *^Lyd\ *^Lyd| *^Lyd/  path/path  FLAG=overlay}
{NEW:TRACK_BORDER_RESTRICTED   (*^Lyd|,*^Lyd/,*^Lyd\) (!,C*,K*,*^F*)   path/path-end  PROB=100 LAYER=-80 FLAG=overlay}
{LAYOUT_TRACKS_F               *^Lyl\ *^Lyl| *^Lyl/  overlay}
{LAYOUT_TRACKS_F               *^Lyl\ *^Lyl| *^Lyl/  overlay}
{NEW:TRACK_COMPLETE      *^Lyl\ *^Lyl| *^Lyl/  path/l-path  FLAG=overlay}
# {TRACK_BORDER_RESTRICTED_PLF (*^Lyl|,*^Lyl/,*^Lyl\) (!,C*,K*,*^F*) 100 -80 overlay path/l-path-end}
{LAYOUT_TRACKS_F               *^Lyr\ *^Lyr| *^Lyr/  overlay}
{LAYOUT_TRACKS_F               *^Lyr\ *^Lyr| *^Lyr/  overlay}
{NEW:TRACK_COMPLETE      *^Lyr\ *^Lyr| *^Lyr/  path/r-path  FLAG=overlay}
# {TRACK_BORDER_RESTRICTED_PLF (*^Lyr|,*^Lyr/,*^Lyr\) (!,C*,K*,*^F*) 100 -80 overlay path/r-path-end}

#{MOUNTAINS_2x2           Dyb                                     80        overlay  drift1}
{NEW:MOUNTAINS_2x2        Dyb                                     drift1  PROB=80  FLAG=overlay}

#{MOUNTAIN_SINGLE         Dyb                                     20        overlay  drift-tile4}
#{MOUNTAIN_SINGLE         Dyb                                     30        overlay  drift-tile3}
#{MOUNTAIN_SINGLE         Dyb                                     50        overlay  drift-tile2}
#{MOUNTAIN_SINGLE         Dyb                                     100       overlay  drift-tile1}
{NEW:MOUNTAIN_SINGLE         Dyb                                  drift-tile    FLAG=overlay}

# Troll camp
# Tcyw instead of Ctyw in order to prevent banks from being drawn by core
#{KEEP_BASE               (Tcyw,Tkyw)                                                   troll_water/base-tile}
{NEW:BASE                (Tcyw,Tkyw)                                                   troll_water/base-tile}
{NEW:BASE                (Cty,Kty)                                                   flat/dirt-dark}
{NEW:BASE                (Ctya,Ktya)                                                   snow-path}
{NEW:TRANSITION          (Ctya,Ktya)        (!,Ktya,Ctya,!,Ct*,Kt*)      -450              snow-path}
#{OVERLAY_COMPLETE        Ctys              (!,Xv,!,C*,K*,H*,M*,X*,Q*,A*)             swamp/reed}
{NEW:OVERLAY             Ctys                           swamp/reed    ADJACENT="!,Xv,!,C*,K*,H*,M*,X*,Q*,A*"}
{NEW:BASE                (Ctys,Ktys)                                                   swamp/mud-tile}
#{OVERLAY_RANDOM          (Kty,Ktys)                                                        troll/keep2}
{NEW:OVERLAY             (Kty,Ktys)                                                         troll/keep2}
{NEW:OVERLAY             (Tkyw)                                                        troll_water/keep2}
{NEW:OVERLAY             (Ktya)                                                        troll-snow/keep}
#{DISABLE_BASE_TRANSITIONS  (Cty,Kty,Ctys,Ktys)}
{NEW:CASTLEWALL      (Cty,Kty,Ctys,Ktys)             (!,Cty,Kty,Cty*,Kty*,Tcyw,Tkyw)     X*                  troll/regular}
{NEW:CASTLEWALL      (Ctya,Ktya)             (!,Cty,Kty,Cty*,Kty*,Tcyw,Tkyw)     X*                  troll-snow/regular}
{NEW:CASTLEWALL      (Tcyw,Tkyw)             (!,Cty,Kty,Cty*,Kty*,Tcyw,Tkyw)     X*                  troll_water/regular}
#{TRANSITION_COMPLETE_LF    (Tcyw,Tkyw)              (Ct*)                        0      troll_transition troll_water/base-tile}
{NEW:TRANSITION             (Tcyw,Tkyw)              (Ct*)                        0      troll_water/base-tile   FLAG=troll_transition}

#{ARCHAIC_ERA:DISABLE_WALL_TRANSITIONS_F (Kty*) wall}
{ARCHAIC_ERA:DISABLE_WALL_TRANSITIONS_F (Kty,Ktya,Ktys) wall}
{ARCHAIC_ERA:DISABLE_WALL_TRANSITIONS_F (Kty,Ktya,Ktys) castlewall}

# Ghost Castle
{NEW:DISABLE_TRANSITION  (Cydy,Kydy) (!,Cydy,Kydy)}
{NEW:BASE               Kydy                                                     despair/cobbles-keep}
{NEW:BASE               Cydy                                                   despair/road}
{NEW:CASTLEWALL      Cydy                 (!,Cydy,Kydy)          X*            despair/castle}
{NEW:CASTLEWALL2     Kydy                 Cydy             (!,Cydy,Kydy)      despair/keep-castle}
{NEW:CASTLEWALL      Kydy                 (!,Kydy)             X*             despair/keep}

# Marble Castle
#{DISABLE_BASE_TRANSITIONS  (Cmy,Kmy)}
#{DISABLE_BASE_TRANSITIONS_F  (Cmy,Kmy) non_fading}
{NEW:DISABLE_TRANSITION  (Cmy,Kmy) (!,Cmy,Kmy) }
{NEW:DISABLE_TRANSITION  (Cmy,Kmy) (!,Cmy,Kmy)  FLAG=non_fading}
{NEW:BASE               Cmy                                                   marble/cobbles-keep}
{NEW:BASE               Kmy                                                   marble/plate}
{NEW:CASTLEWALL      Cmy                 (!,Cmy,Kmy)         X*             marble/castle}
{NEW:CASTLEWALL2     Kmy                 Cmy             (!,Cmy,Kmy)      marble/keep-castle}
{NEW:CASTLEWALL      Kmy                 (!,Kmy)           X*               marble/keep}

# Metal Castle - having some trouble b/c it shares same pattern as Troll keep
{NEW:BASE               (Ktym,Ctym)                                                   dark_planet/metal-castle/metal-hex}
{NEW:OVERLAY            (Ktym)                                                        dark_planet/metal-castle/keep}
#{TRANSITION_COMPLETE_L     (Ctym)          (!,K*,C*)                0     dark_planet/metal-castle/outer-small} # layer=0 to keep them above the walls, but not floating over the unit sprites
{NEW:TRANSITION         (Ctym)          (!,K*,C*)                0     dark_planet/metal-castle/outer-small} # layer=0 to keep them above the walls, but not floating over the unit sprites
##{TRANSITION_COMPLETE_L     (Ktym)          (!,Ktym)                0     dark_planet/metal-castle/outer-large}
## {NEW:WALL      (Ctym,Ktym)             (!,Cty,Kty,Cty*,Kty*,Tcyw,Tkyw)                       dark_planet/metal-castle/regular}
{NEW:CASTLEWALL2     Ktym                 Ctym             (!,Ctym,Ktym)      dark_planet/metal-castle/fence/tall-keep}
{NEW:CASTLEWALL      Ctym             (!,Cty,Kty,Cty*,Kty*,Tcyw,Tkyw)    X*                   dark_planet/metal-castle/regular}
{NEW:CASTLEWALL      Ktym             (!,Kty,Kty*,Tkyw)          X*             dark_planet/metal-castle/fence/tall-keep}

# Primeval Castle
#{DISABLE_BASE_TRANSITIONS  (Cpy,Kpy)}
#{KEEP_BASE               Cpy                                                   primeval/dirt}
#{KEEP_BASE               Kpy                                                   primeval/cobbles}
{NEW:DISABLE_TRANSITION  (Cpy,Kpy) (!,Cpy,Kpy)}
{NEW:BASE               Cpy                                                   primeval/dirt}
{NEW:BASE               Kpy                                                   primeval/cobbles}
{NEW:CASTLEWALL      Cpy                 (!,Cpy,Kpy)             X*         primeval/castle}
{NEW:WALL2     Kpy                 Cpy             (!,Cpy,Kpy)      primeval/keep-castle}
{NEW:CASTLEWALL      Kpy                 (!,Kpy)                 X*         primeval/keep}

# Ancient Castle
#{DISABLE_BASE_TRANSITIONS  (Cay,Kay)}
#{TERRAIN_BASE_L               Cay                 -50                                  ancient/cobbles-keep}
#{TERRAIN_BASE_P          Kay                              10                   ancient/plate7}
{NEW:DISABLE_TRANSITION  (Cay,Kay) (!,Cay,Kay)}
{NEW:BASE                Cay                              ancient/cobbles-keep  LAYER=-50}
{NEW:BASE                Kay                              ancient/plate}
{NEW:CASTLEWALL      Cay                 (!,Cay,Kay)      X*                ancient/castle}
{NEW:WALL2     Kay                 Cay             (!,Cay,Kay)      ancient/keep-castle}
{NEW:CASTLEWALL      Kay                 (!,Kay)          X*                ancient/keep}

# Ice cave and walls

{NEW:BASE                  Uyi                                                        ice/floor}
{NEW:TRANSITION            Uyi          (!,Uyi,W*,Ai,Q*,Xu*)             -220               ice/floor}

{NEW:BASE            Xyui                                                        ice/wall-rough}
{NEW:WALL_TRANSITION   Qx*              (Ai*,Aa*,Ha*,Ms*)                  chasm/regular-snow   LAYER=-90  FLAG=ground  }
{NEW:WALL      Xyui            (Qx*,Ql)                               ice/wall-rough-chasm}
{NEW:WALL      Xyui            (!,Xu*,Xyui)                                ice/wall-rough}

{NEW:BASE            Qxyi                                                       ice/depths}
{NEW:WALL_TRANSITION   Qxyi              (Ai*,Aa*,Uyi,Xyui,Mybd)                ice/regular  LAYER=-90  FLAG=ground}
{NEW:TRANSITION_INTRA        (Cha,Kha,Coa,Koa,Cea,Kea)                         -80    ice/regular-castle  FLAG=transition2 ADJACENT="Qxyi"}

# wall

{NEW:WALL_CORNER                 Xopy               (!,Xo*,Xu*,Xp*)      metal-wall/wall}
# {NEW:WALL_CORNER                 Xp*               (!,Xo*,Xu*,Xp*)      walls/stone/wall-stone}
{NEW:WALL                        Xopy           (!,Xu*,Xo*,Xp*)      metal-wall/wall}
# {NEW:WALL                        Xp*           (!,Xu*,Xo*,Xp*)      walls/stone/wall-stone}
{NEW:WALL_FLAMES_OVERLAY (Xopy^Efs)                                                       metal-wall/light}
# this should not be needed in BfW 1.15+
#define TRI_NEW:WALL_NOFLAMES_OVERLAY TERRAINLIST IMAGESTEM
#arg PROB
100#endarg

#arg LAYER
4#endarg

#arg LAYER2
2#endarg

#arg FLAG
flame#endarg

#arg ADJACENT
X*#endarg

#arg POST
wall#endarg
[terrain_graphics]
    # this prevents the -convex-bl image from showing for Xo* SE of Xo*^Efs
    map="
, *
1 , *
, 2
* , 3
, *"
    [tile]
        pos=1
        type={TERRAINLIST}
    [/tile]
    [tile]
        pos=2
        type={ADJACENT}
        set_flag={FLAG}-bl
    [/tile]
    [tile]
        pos=3
        type={TERRAINLIST},{ADJACENT}
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    # this keeps the convex-bl image from showing up on all SW facing diagonal images
    map="
, *
* , *
, 1
* , 2
, *"
    [tile]
        pos=1
        type={TERRAINLIST}
        set_flag={FLAG}-bl
    [/tile]
    [tile]
        pos=2
        type={TERRAINLIST},{ADJACENT}
    [/tile]
[/terrain_graphics]
[terrain_graphics]
    # this keeps the fire overlays from showing up everywhere
    map="
, *
* , *
, 1
* , 2
, *"
    [tile]
        pos=1
        type={TERRAINLIST}
        set_flag={FLAG}-bl
    [/tile]
    [tile]
        pos=2
        type={TERRAINLIST},{ADJACENT}
    [/tile]
[/terrain_graphics]

# these are the real rules
[terrain_graphics]
    map="
2
,  3
1"
    [tile]
        pos=1
        type=!,{ADJACENT}
        set_no_flag={FLAG}-@R0
    [/tile]
    [tile]
        pos=2
        type={TERRAINLIST}
    [/tile]
    [tile]
        pos=3
        type={TERRAINLIST}
    [/tile]

    rotations=tr,r,br,bl,l,tl
    probability={PROB}

    [image]
        layer={LAYER2}
        base=24,80
        name={IMAGESTEM}/{POST}-post-concave-@R0.png
    [/image]
[/terrain_graphics]

[terrain_graphics]
    map="
2
,  3
1"
    [tile]
        pos=1
        type={TERRAINLIST}
        set_no_flag={FLAG}-@R0
    [/tile]
    [tile]
        pos=2
        type=!,{ADJACENT}
        set_no_flag={FLAG}-@R2
    [/tile]
    [tile]
        pos=3
        type=!,{ADJACENT}
        set_no_flag={FLAG}-@R4
    [/tile]

    rotations=tr,r,br,bl,l,tl
    probability={PROB}

    [image]
        layer={LAYER2}
        base=24,24
        name={IMAGESTEM}/{POST}-post-convex-@R0.png
    [/image]
[/terrain_graphics]

#enddef
{TRI_NEW:WALL_NOFLAMES_OVERLAY (Xopy^Enfy)                                                       metal-wall/light}
{TRI_NEW:WALL_NOFLAMES_OVERLAY (Xo*^Enfy)                                                       walls/stone/flames/sconce}

[terrain_graphics]
    map="
    *,*,*,*    
    ,*,*,*,*
    *,1,*,*     
    ,*,*,*,*
    *,*,*,* 
    ,*,*,*,*
    *,*,*,* 
    ,*,*,*,*
    *,*,*,*   
    ,*,*,*,*
    *,*,*,* 
    ,*,*,*,*
    *,*,*,* 
    ,*,*,*,*    
    *,*,*,* 
    ,*,*,*,*
    *,*,*,*  
    ,*,*,*,*"

    [tile]
        pos=1
        type=*^Yrug
        set_no_flag=bmr_royal_rug
    [/tile]
    [image]
        layer=-99
        name=scenery-terrain/royal-rug.png
        center=144,295
    [/image]
    probability=100
[/terrain_graphics]

#{OVERLAY_RANDOM *^Vysi villages/sign-item}
#{OVERLAY_RANDOM *^Vysw villages/sign-weapon}
{NEW:OVERLAY *^Vysi   villages/sign-item}
{NEW:OVERLAY *^Vysw   villages/sign-weapon}

#define ARCHAIC_MCABINET_TERRAIN_P PROB IMG
    [terrain_graphics]
        map="
,*,*,
*,1,*
,1,*,
*,2,*
,*,*"

        [tile]
            pos=1
            type=Xo*^Taby,Xpo*^Taby
            no_flag=overlay
            set_flag=overlay
        [/tile]
        [tile]
            pos=2
            type=Fyp*,Fyp*^*
            #        no_flag=overlay
            set_flag=overlay
        [/tile]

        [image]
            name={IMG}
            base=190,190
            center=135,160
            layer=0
        [/image]

        probability={PROB}
    [/terrain_graphics]
    [terrain_graphics]
        map="
,*,*,
*,1,*
,*,1,
*,2,*
,*,*"

        [tile]
            pos=1
            type=Xo*^Taby,Xpo*^Taby
            no_flag=overlay
            set_flag=overlay
        [/tile]
        [tile]
            pos=2
            type=Fyp*,Fyp*^*
            #        type=Fypd
            #        no_flag=overlay
            set_flag=overlay
        [/tile]

        [image]
            name={IMG}~FL(horiz)
            base=190,190
            center=155,160
            layer=0
        [/image]

        probability={PROB}
    [/terrain_graphics]
#enddef
{ARCHAIC_MCABINET_TERRAIN_P 20 scenery-terrain/m-cabinet3.png}
{ARCHAIC_MCABINET_TERRAIN_P 60 scenery-terrain/m-cabinet1.png}
{ARCHAIC_MCABINET_TERRAIN_P 100 scenery-terrain/m-cabinet2.png}

#define ARCHAIC_MTABLE_TERRAIN_P PROB IMG
    [terrain_graphics]
        map="
,* 
2,*
,1,
*,*
,*"

        [tile]
            pos=1
            type=Fyp*^Taby
            no_flag=overlay
            set_flag=overlay
        [/tile]
        [tile]
            pos=2
            type=Xo*,Xpo*
        [/tile]

        [image]
            name={IMG}
            #        base=90,144
            center=90,136
            layer=0
        [/image]

        probability={PROB}
    [/terrain_graphics]
    [terrain_graphics]
        map="
,* 
*,2
,1,
*,*
,*"

        [tile]
            pos=1
            type=Fyp*^Taby
            no_flag=overlay
            set_flag=overlay
        [/tile]
        [tile]
            pos=2
            type=Xo*,Xpo*
        [/tile]

        [image]
            name={IMG}~FL(horiz)
            #        base=90,144
            center=90,136
            layer=0
        [/image]

        probability={PROB}
    [/terrain_graphics]
#enddef
{ARCHAIC_MTABLE_TERRAIN_P 80 scenery-terrain/m-table1.png}
{ARCHAIC_MTABLE_TERRAIN_P 100 scenery-terrain/m-table2.png}

#define ARCHAIC_MTABLE2_TERRAIN_P PROB IMG

    [terrain_graphics]
        map="
,* 
*,*
,1,
*,*
,*"

        [tile]
            pos=1
            type=Fyp*^Taby
            no_flag=overlay
            set_flag=overlay
        [/tile]

        [image]
            name={IMG}
            base=90,144
            center=90,144
            layer=0
        [/image]

        probability={PROB}
    [/terrain_graphics]
#enddef
{ARCHAIC_MTABLE2_TERRAIN_P 20 scenery-terrain/metal-table1.png}
{ARCHAIC_MTABLE2_TERRAIN_P 40 scenery-terrain/metal-table3.png}
{ARCHAIC_MTABLE2_TERRAIN_P 100 scenery-terrain/metal-table2.png}

[terrain_graphics]
    map="
,*,*,
*,1,*
,*,1,
*,*,*
,*,*"

    [tile]
        pos=1
        type=*^Taby
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=scenery-terrain/table3-flip.png
        base=90,144
        center=174,128
        layer=0
    [/image]

    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
,*,*,
*,1,*
,1,*,
*,*,*
,*,*"

    [tile]
        pos=1
        type=*^Taby
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=scenery-terrain/table3.png
        base=90,144
        center=120,114
        layer=0
    [/image]

    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Taby
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=scenery-terrain/table1.png
        base=90,144
        center=90,144
        layer=0
    [/image]

    probability=30
[/terrain_graphics]

[terrain_graphics]
    map="
,* 
*,*
,1,
*,*
,*"

    [tile]
        pos=1
        type=*^Taby
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=scenery-terrain/table2.png
        base=90,144
        center=90,144
        layer=0
    [/image]

    probability=100
[/terrain_graphics]

# Trinity stuff
[terrain_graphics]
    map="
.,  *,  .,  .
, *,  *,  .
*,  1,  *,  .
, 1,  1,  *
*,  1,  *,  .
, *,  *,  .
.,  *,  .,   .
, .,  .,  ."

    [tile]
        pos=1
        type=*^Eyt
        no_flag=
        set_flag=overlay
    [/tile]
    [image]
        name=EngineBig_A-[0,1,2,3].png:120
        base=88,190
        layer=0
    [/image]
    [image]
        name=EngineBig_A-cap[0,1,2,3,2,1,0,1,0].png:[2280,30,70,180,70,40,60,160,120]
        #        random_start=no
        base=88,190
        layer=0
    [/image]
    [image]
        name=EngineBig_A-smoke[0,1,2,3,4,0].png:[2280,50,90,200,170,220]
        #        random_start=no
        base=88,190
        layer=10
    [/image]
#ifdef __UNUSED__
    # It might not be correct to use both base and layer?
    [image]
        name=EngineBig_1.png
        base=88,107
        layer=1
    [/image]

    [image]
        name=EngineBig_2.png
        base=142,72
        layer=1
    [/image]

    [image]
        name=EngineBig_3.png
        base=196,107
        layer=1
    [/image]
#endif
    probability=100
[/terrain_graphics]

[terrain_graphics]
    map="
, *
* , *
, 1
* , *
, *"

    [tile]
        pos=1
        type=*^Eyt
        no_flag=overlay
        set_flag=overlay
    [/tile]

    [image]
        name=engine-tile1.png
        base=90,107
        center=90,144
        layer=1
    [/image]

    probability=100
[/terrain_graphics]

{NEW:BASE Bluy blue}
#{TERRAIN_BASE_P Spay 30 snow-path2}
#{TERRAIN_BASE Spay snow-path}
{NEW:BASE Spay snow-path}

#villages

{NEW:VILLAGE *^Vyb bellows}
#{NEW:VILLAGE *^Syb warship}
{NEW:VILLAGE *^Vmyt villages/metal-tent}
#{VILLAGE *^Gyb loyship}
{NEW:VILLAGE *^Ayb villages/air-vent}
{NEW:VILLAGE *^Vypr villages/primeval}
#{VILLAGE_RANDOM *^Vyd villages/desert}
#{VILLAGE_RANDOM *^Vyud villages/undead-city}
#{VILLAGE_RANDOM *^Vyud villages/alt-human}
#{VILLAGE_RANDOM *^Vyh villages/alt-human-hills}
#{VILLAGE_RANDOM *^Vytt villages/test}
#{VILLAGE_RANDOM *^Vygo villages/igloo}

{NEW:VILLAGE *^Ahsy villages/hot-springs}
{NEW:OVERLAY *^Ahsy villages/hot-springs-steam/a ANIM=[1~16] LAYER=51 TIME=100 FLAG=steam}
